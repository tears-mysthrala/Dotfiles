#!/usr/bin/env zsh
# ============================================================================
# Zsh Configuration - Entry Point
# Auto-generated by Dotfiles repository
# ============================================================================

# ============================================================================
# Zsh Options
# ============================================================================
setopt AUTO_CD              # Change directory by typing dirname
setopt AUTO_PUSHD           # Push directories onto stack
setopt PUSHD_IGNORE_DUPS    # Don't push duplicates
setopt PUSHD_SILENT         # Don't print directory stack
setopt EXTENDED_GLOB        # Extended globbing patterns
setopt HIST_IGNORE_DUPS     # Don't record duplicates
setopt HIST_IGNORE_SPACE    # Don't record lines starting with space
setopt SHARE_HISTORY        # Share history between sessions
setopt APPEND_HISTORY       # Append to history file

# History configuration
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000

# ============================================================================
# Load Shell Modules
# ============================================================================
# Load configuration from modular files in order:
# 1. exports (environment variables, PATH)
# 2. aliases (command shortcuts)
# 3. functions (custom shell functions)
for file in "$HOME/.config/shell/"{exports,aliases,functions}.sh; do
    [ -f "$file" ] && source "$file"
done

# ============================================================================
# Tool Initialization
# ============================================================================

# Starship Prompt
if command -v starship >/dev/null 2>&1; then
    eval "$(starship init zsh)"
fi

# Zoxide (smart cd replacement)
if command -v zoxide >/dev/null 2>&1; then
    eval "$(zoxide init zsh)"
fi

# FZF (fuzzy finder)
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# ============================================================================
# Zsh Completion System
# ============================================================================
autoload -Uz compinit
# Check completion cache once per day
if [[ -n ${ZDOTDIR}/.zcompdump(#qN.mh+24) ]]; then
    compinit
else
    compinit -C
fi

# ============================================================================
# User Customization
# ============================================================================
# Add your personal customizations below or in ~/.zshrc.local
[ -f "$HOME/.zshrc.local" ] && source "$HOME/.zshrc.local"
